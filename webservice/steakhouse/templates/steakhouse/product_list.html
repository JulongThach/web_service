{% extends 'steakhouse/base.html' %}
{% load static %}

{% block content %}
{% load static %}
<link rel="stylesheet" type="text/css" href="{% static 'css/product_list.css' %}">
<!-- AOS Animation Library -->
<link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">

<!-- Products Start -->
    <section class="py-5" style="margin-top: -5rem;">
        <div class="container-fluid">
          <div class="row">
            <div class="col-md-12">
              <div class="bootstrap-tabs product-tabs">
                <div class="tabs-header d-flex justify-content-between border-bottom my-5">
                  <nav>
                    <div class="nav nav-tabs" id="nav-tab" role="tablist">
                      <a href="#" class="nav-link text-uppercase fs-6 active" id="nav-all-tab" data-bs-toggle="tab" data-bs-target="#nav-popular">Popular</a>
                    </div>
                  </nav>
                </div>
                <div class="tab-content" id="nav-tabContent">
                    <div class="tab-pane fade show active" id="nav-popular" role="tabpanel" aria-labelledby="nav-all-tab">
                        <div class="product-grid">
                            {% for product in popular %}
                            <div class="product-card">
                              <div class="product-info">
                                <h3>{{ product.name }}</h3>
                                <p>{{ product.decription }}</p>
                                <span>${{ product.price }}</span>
                                <p>{{ product.description|truncatechars:60 }}</p>
                              </div>
                              <div class="image-container">
                                <img src="{{ product.image.url }}" alt="{{ product.name }}" class="product-img">
                                <form action="{% url 'add_to_cart' product.id %}" method="post" class="mt-auto add-to-cart-form">
                                {% csrf_token %}
                                  <button type="submit" class="add-btn">+</button>
                                </form>
                              </div>
                            </div>
                            {% endfor %}
                        </div>
                    <!-- / product-grid -->
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
    </section>

    <!-- Mixed Food -->
    <section class="py-5" style="margin-top: -5rem;">
        <div class="container-fluid">
          <div class="row">
            <div class="col-md-12">
              <div class="bootstrap-tabs product-tabs">
                <div class="tabs-header d-flex justify-content-between border-bottom my-5">
                  <nav>
                    <div class="nav nav-tabs" id="nav-tab" role="tablist">
                      <a href="#" class="nav-link text-uppercase fs-6 active" id="nav-all-tab" data-bs-toggle="tab" data-bs-target="#nav-mixed">Mixed Food</a>
                    </div>
                  </nav>
                </div>
                <div class="tab-content" id="nav-tabContent">
                    <div class="tab-pane fade show active" id="nav-mixed" role="tabpanel" aria-labelledby="nav-all-tab">
                        <div class="product-grid">
                            {% for product in mixed %}
                            <div class="product-card">
                              <div class="product-info">
                                <h3>{{ product.name }}</h3>
                                <p>{{ product.decription }}</p>
                                <span>${{ product.price }}</span>
                                <p>{{ product.description|truncatechars:60 }}</p>
                              </div>
                              <div class="image-container">
                                <img src="{{ product.image.url }}" alt="{{ product.name }}" class="product-img">
                                <form action="{% url 'add_to_cart' product.id %}" method="post" class="mt-auto add-to-cart-form">
                                {% csrf_token %}
                                  <button type="submit" class="add-btn">+</button>
                                </form>
                              </div>
                            </div>
                            {% endfor %}
                        </div>
                    <!-- / product-grid -->
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
    </section>

    <!-- Steak -->
    <section class="py-5" style="margin-top: -5rem;">
        <div class="container-fluid">
          <div class="row">
            <div class="col-md-12">
              <div class="bootstrap-tabs product-tabs">
                <div class="tabs-header d-flex justify-content-between border-bottom my-5">
                  <nav>
                    <div class="nav nav-tabs" id="nav-tab" role="tablist">
                      <a href="#" class="nav-link text-uppercase fs-6 active" id="nav-all-tab" data-bs-toggle="tab" data-bs-target="#nav-steak">Steak</a>
                    </div>
                  </nav>
                </div>
                <div class="tab-content" id="nav-tabContent">
                    <div class="tab-pane fade show active" id="nav-steak" role="tabpanel" aria-labelledby="nav-all-tab">
                        <div class="product-grid">
                            {% for product in steak %}
                            <div class="product-card">
                              <div class="product-info">
                                <h3>{{ product.name }}</h3>
                                <p>{{ product.decription }}</p>
                                <span>${{ product.price }}</span>
                                <p>{{ product.description|truncatechars:60 }}</p>
                              </div>
                              <div class="image-container">
                                <img src="{{ product.image.url }}" alt="{{ product.name }}" class="product-img">
                                <form action="{% url 'add_to_cart' product.id %}" method="post" class="mt-auto add-to-cart-form">
                                {% csrf_token %}
                                  <button type="submit" class="add-btn">+</button>
                                </form>
                              </div>
                            </div>
                            {% endfor %}
                        </div>
                    <!-- / product-grid -->
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
    </section>

    <!-- Suit -->
    <section class="py-5" style="margin-top: -5rem;">
        <div class="container-fluid">
          <div class="row">
            <div class="col-md-12">
              <div class="bootstrap-tabs product-tabs">
                <div class="tabs-header d-flex justify-content-between border-bottom my-5">
                  <nav>
                    <div class="nav nav-tabs" id="nav-tab" role="tablist">
                      <a href="#" class="nav-link text-uppercase fs-6 active" id="nav-all-tab" data-bs-toggle="tab" data-bs-target="#nav-suit">Suit</a>
                    </div>
                  </nav>
                </div>
                <div class="tab-content" id="nav-tabContent">
                    <div class="tab-pane fade show active" id="nav-steak" role="tabpanel" aria-labelledby="nav-all-tab">
                        <div class="product-grid">
                            {% for product in suit %}
                            <div class="product-card">
                              <div class="product-info">
                                <h3>{{ product.name }}</h3>
                                <p>{{ product.decription }}</p>
                                <span>${{ product.price }}</span>
                                <p>{{ product.description|truncatechars:60 }}</p>
                              </div>
                              <div class="image-container">
                                <img src="{{ product.image.url }}" alt="{{ product.name }}" class="product-img">
                                <form action="{% url 'add_to_cart' product.id %}" method="post" class="mt-auto add-to-cart-form">
                                {% csrf_token %}
                                  <button type="submit" class="add-btn">+</button>
                                </form>
                              </div>
                            </div>
                            {% endfor %}
                        </div>
                    <!-- / product-grid -->
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
    </section>

    <!-- Spaghetti -->
    <section class="py-5" style="margin-top: -5rem;">
        <div class="container-fluid">
          <div class="row">
            <div class="col-md-12">
              <div class="bootstrap-tabs product-tabs">
                <div class="tabs-header d-flex justify-content-between border-bottom my-5">
                  <nav>
                    <div class="nav nav-tabs" id="nav-tab" role="tablist">
                      <a href="#" class="nav-link text-uppercase fs-6 active" id="nav-all-tab" data-bs-toggle="tab" data-bs-target="#nav-spaghetti">Spaghetti</a>
                    </div>
                  </nav>
                </div>
                <div class="tab-content" id="nav-tabContent">
                    <div class="tab-pane fade show active" id="nav-spaghetti" role="tabpanel" aria-labelledby="nav-all-tab">
                        <div class="product-grid">
                            {% for product in spaghetti %}
                            <div class="product-card">
                              <div class="product-info">
                                <h3>{{ product.name }}</h3>
                                <p>{{ product.decription }}</p>
                                <span>${{ product.price }}</span>
                                <p>{{ product.description|truncatechars:60 }}</p>
                              </div>
                              <div class="image-container">
                                <img src="{{ product.image.url }}" alt="{{ product.name }}" class="product-img">
                                <form action="{% url 'add_to_cart' product.id %}" method="post" class="mt-auto add-to-cart-form">
                                {% csrf_token %}
                                  <button type="submit" class="add-btn">+</button>
                                </form>
                              </div>
                            </div>
                            {% endfor %}
                        </div>
                    <!-- / product-grid -->
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
    </section>

    <!-- Add -->
    <section class="py-5" style="margin-top: -5rem;">
        <div class="container-fluid">
          <div class="row">
            <div class="col-md-12">
              <div class="bootstrap-tabs product-tabs">
                <div class="tabs-header d-flex justify-content-between border-bottom my-5">
                  <nav>
                    <div class="nav nav-tabs" id="nav-tab" role="tablist">
                      <a href="#" class="nav-link text-uppercase fs-6 active" id="nav-all-tab" data-bs-toggle="tab" data-bs-target="#nav-add">Add</a>
                    </div>
                  </nav>
                </div>
                <div class="tab-content" id="nav-tabContent">
                    <div class="tab-pane fade show active" id="nav-add" role="tabpanel" aria-labelledby="nav-all-tab">
                        <div class="product-grid">
                            {% for product in add %}
                            <div class="product-card">
                              <div class="product-info">
                                <h3>{{ product.name }}</h3>
                                <p>{{ product.decription }}</p>
                                <span>${{ product.price }}</span>
                                <p>{{ product.description|truncatechars:60 }}</p>
                              </div>
                              <div class="image-container">
                                <img src="{{ product.image.url }}" alt="{{ product.name }}" class="product-img">
                                <form action="{% url 'add_to_cart' product.id %}" method="post" class="mt-auto add-to-cart-form">
                                {% csrf_token %}
                                  <button type="submit" class="add-btn">+</button>
                                </form>
                              </div>
                            </div>
                            {% endfor %}
                        </div>
                    <!-- / product-grid -->
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
    </section>

    <!-- Drink -->
    <section class="py-5" style="margin-top: -5rem;">
        <div class="container-fluid">
          <div class="row">
            <div class="col-md-12">
              <div class="bootstrap-tabs product-tabs">
                <div class="tabs-header d-flex justify-content-between border-bottom my-5">
                  <nav>
                    <div class="nav nav-tabs" id="nav-tab" role="tablist">
                      <a href="#" class="nav-link text-uppercase fs-6 active" id="nav-all-tab" data-bs-toggle="tab" data-bs-target="#nav-drink">Drink</a>
                    </div>
                  </nav>
                </div>
                <div class="tab-content" id="nav-tabContent">
                    <div class="tab-pane fade show active" id="nav-drink" role="tabpanel" aria-labelledby="nav-all-tab">
                        <div class="product-grid">
                            {% for product in drink %}
                            <div class="product-card">
                              <div class="product-info">
                                <h3>{{ product.name }}</h3>
                                <p>{{ product.decription }}</p>
                                <span>${{ product.price }}</span>
                                <p>{{ product.description|truncatechars:60 }}</p>
                              </div>
                              <div class="image-container">
                                <img src="{{ product.image.url }}" alt="{{ product.name }}" class="product-img">
                                <form action="{% url 'add_to_cart' product.id %}" method="post" class="mt-auto add-to-cart-form">
                                {% csrf_token %}
                                  <button type="submit" class="add-btn">+</button>
                                </form>
                              </div>
                            </div>
                            {% endfor %}
                        </div>
                    <!-- / product-grid -->
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
    </section>

<!-- AOS + SweetAlert + Cart JS -->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
<script>
    AOS.init();
    const forms = document.querySelectorAll('.add-to-cart-form');
    const cartCount = document.getElementById('cart-count');
    forms.forEach(form => {
        form.addEventListener('submit', function(e) {
            e.preventDefault();
            fetch(this.action, {
                method: 'POST',
                body: new FormData(this)
            })
            .then(response => {
                if (response.ok) {
                    Swal.fire({
                        position: 'top-end',
                        icon: 'success',
                        title: 'Added to Cart!',
                        showConfirmButton: false,
                        timer: 1200,
                        toast: true
                    });

                    // Update cart count
                    let count = parseInt(cartCount.textContent);
                    cartCount.textContent = count + 1;
                }
            });
        });
    });
</script>
<script>
  window.addEventListener('scroll', () => {
    const header = document.querySelector('header');
    if (window.scrollY > 50) {
      header.classList.add('scrolled');
    } else {
      header.classList.remove('scrolled');
    }
  });
</script>
{% endblock %}
