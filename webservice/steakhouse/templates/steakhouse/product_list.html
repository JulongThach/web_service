{% extends 'steakhouse/base.html' %}

{% block content %}
{% load static %}
<!-- AOS Animation Library -->
<link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">

<!-- Products Start -->
<div class="px-4 py-6 max-w-6xl mx-auto">
  <!-- Category Dropdown -->
  <div class="mb-6 flex justify-start">
    <select onchange="showCategory(this.value)" class="px-4 py-2 border rounded-md shadow focus:outline-none focus:ring-2 focus:ring-green-500">
      <option value="all">üç± All Categories</option>
      <option value="popular">üçΩÔ∏è Popular</option>
      <option value="mixed"> ü•ò Mixed Food</option>
      <option value="steak">ü•© Steak</option>
      <option value="suit">üç≤ Suit</option>
      <option value="spaghetti">üçù Spaghetti</option>
      <option value="add">üç≤ Additional</option>
      <option value="drink">üç≤ Drink</option>
    </select>
  </div>
  <!-- All Category -->
  <div id="category-all" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
    <!-- Card 1 -->
      {% for product in full_set %}
      <div class="bg-white rounded-lg shadow-lg p-4">
        <img src="{{ product.image.url }}" alt="Dish 1" class="w-full h-48 object-cover rounded-lg mb-4">
        <h3 class="text-xl font-semibold mb-2">{{ product.name }}</h3>
        <p class="text-gray-600 mb-2">{{ product.decription }}</p>
        <p class="text-green-500 font-semibold mb-4">${{ product.price }}</p>
        <form action="{% url 'add_to_cart' product.id %}" method="post" class="mt-auto add-to-cart-form">
          {% csrf_token %}
          <button class="bg-green-700 text-white py-2 px-4 rounded-full w-full">Add to Order</button>
        </form>
      </div>
      {% endfor %}
  </div>
  <!-- Pupular -->
  <div id="category-popular" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
    <!-- Card 1 -->
      {% for product in popular %}
      <div class="bg-white rounded-lg shadow-lg p-4">
        <img src="{{ product.image.url }}" alt="Dish 1" class="w-full h-48 object-cover rounded-lg mb-4">
        <h3 class="text-xl font-semibold mb-2">{{ product.name }}</h3>
        <p class="text-gray-600 mb-2">{{ product.decription }}</p>
        <p class="text-green-500 font-semibold mb-4">${{ product.price }}</p>
        <form action="{% url 'add_to_cart' product.id %}" method="post" class="mt-auto add-to-cart-form">
          {% csrf_token %}
          <button class="bg-green-700 text-white py-2 px-4 rounded-full w-full">Add to Order</button>
        </form>
      </div>
      {% endfor %}
  </div>
  <!-- Mixed Food -->
  <div id="category-mixed" class="hidden grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
    {% for product in mixed %}
    <div class="bg-white rounded-lg shadow-lg p-4">
      <img src="{{ product.image.url }}" alt="Dish 1" class="w-full h-48 object-cover rounded-lg mb-4">
      <h3 class="text-xl font-semibold mb-2">{{ product.name }}</h3>
      <p class="text-gray-600 mb-2">{{ product.decription }}</p>
      <p class="text-green-500 font-semibold mb-4">${{ product.price }}</p>
      <form action="{% url 'add_to_cart' product.id %}" method="post" class="mt-auto add-to-cart-form">
        {% csrf_token %}
        <button class="bg-green-700 text-white py-2 px-4 rounded-full w-full">Add to Order</button>
      </form>
    </div>
    {% endfor %}
  </div>
  <!-- Steak -->
  <div id="category-steak" class="hidden grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
    {% for product in steak %}
    <div class="bg-white rounded-lg shadow-lg p-4">
      <img src="{{ product.image.url }}" alt="Dish 1" class="w-full h-48 object-cover rounded-lg mb-4">
      <h3 class="text-xl font-semibold mb-2">{{ product.name }}</h3>
      <p class="text-gray-600 mb-2">{{ product.decription }}</p>
      <p class="text-green-500 font-semibold mb-4">${{ product.price }}</p>
      <form action="{% url 'add_to_cart' product.id %}" method="post" class="mt-auto add-to-cart-form">
        {% csrf_token %}
        <button class="bg-green-700 text-white py-2 px-4 rounded-full w-full">Add to Order</button>
      </form>
    </div>
    {% endfor %}
  </div>
  <!-- Suit -->
  <div id="category-suit" class="hidden grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
    {% for product in suit %}
    <div class="bg-white rounded-lg shadow-lg p-4">
      <img src="{{ product.image.url }}" alt="Dish 1" class="w-full h-48 object-cover rounded-lg mb-4">
      <h3 class="text-xl font-semibold mb-2">{{ product.name }}</h3>
      <p class="text-gray-600 mb-2">{{ product.decription }}</p>
      <p class="text-green-500 font-semibold mb-4">${{ product.price }}</p>
      <form action="{% url 'add_to_cart' product.id %}" method="post" class="mt-auto add-to-cart-form">
        {% csrf_token %}
        <button class="bg-green-700 text-white py-2 px-4 rounded-full w-full">Add to Order</button>
      </form>
    </div>
    {% endfor %}
  </div>

  <!-- Spaghetti -->
  <div id="category-spaghetti" class="hidden grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
    {% for product in spaghetti %}
    <div class="bg-white rounded-lg shadow-lg p-4">
      <img src="{{ product.image.url }}" alt="Dish 1" class="w-full h-48 object-cover rounded-lg mb-4">
      <h3 class="text-xl font-semibold mb-2">{{ product.name }}</h3>
      <p class="text-gray-600 mb-2">{{ product.decription }}</p>
      <p class="text-green-500 font-semibold mb-4">${{ product.price }}</p>
      <form action="{% url 'add_to_cart' product.id %}" method="post" class="mt-auto add-to-cart-form">
        {% csrf_token %}
        <button class="bg-green-700 text-white py-2 px-4 rounded-full w-full">Add to Order</button>
      </form>
    </div>
    {% endfor %}
  </div>
  <!-- Additional -->
  <div id="category-add" class="hidden grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
    {% for product in add %}
    <div class="bg-white rounded-lg shadow-lg p-4">
      <img src="{{ product.image.url }}" alt="Dish 1" class="w-full h-48 object-cover rounded-lg mb-4">
      <h3 class="text-xl font-semibold mb-2">{{ product.name }}</h3>
      <p class="text-gray-600 mb-2">{{ product.decription }}</p>
      <p class="text-green-500 font-semibold mb-4">${{ product.price }}</p>
      <form action="{% url 'add_to_cart' product.id %}" method="post" class="mt-auto add-to-cart-form">
        {% csrf_token %}
        <button class="bg-green-700 text-white py-2 px-4 rounded-full w-full">Add to Order</button>
      </form>
    </div>
    {% endfor %}
  </div>
  <!-- Drink -->
  <div id="category-drink" class="hidden grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
    {% for product in drink %}
    <div class="bg-white rounded-lg shadow-lg p-4">
      <img src="{{ product.image.url }}" alt="Dish 1" class="w-full h-48 object-cover rounded-lg mb-4">
      <h3 class="text-xl font-semibold mb-2">{{ product.name }}</h3>
      <p class="text-gray-600 mb-2">{{ product.decription }}</p>
      <p class="text-green-500 font-semibold mb-4">${{ product.price }}</p>
      <form action="{% url 'add_to_cart' product.id %}" method="post" class="mt-auto add-to-cart-form">
        {% csrf_token %}
        <button class="bg-green-700 text-white py-2 px-4 rounded-full w-full">Add to Order</button>
      </form>
    </div>
    {% endfor %}
  </div>
</div>
<!-- AOS + SweetAlert + Cart JS -->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
<script>
  function showCategory(category) {
    document.querySelectorAll('[id^="category-"]').forEach(el => el.classList.add('hidden'));
    document.getElementById(`category-${category}`).classList.remove('hidden');
  }
</script>
<script>
    AOS.init();
    const forms = document.querySelectorAll('.add-to-cart-form');
    const cartCount = document.getElementById('cart-count');
    forms.forEach(form => {
        form.addEventListener('submit', function(e) {
            e.preventDefault();
            fetch(this.action, {
                method: 'POST',
                body: new FormData(this)
            })

            .then(response => {
                if (response.ok) {
                    Swal.fire({
                        position: 'top-end',
                        icon: 'success',
                        title: 'Added to Cart!',
                        showConfirmButton: false,
                        timer: 1200,
                        toast: true
                    });

                    // Update cart count
                    let count = parseInt(cartCount.textContent);
                    cartCount.textContent = count + 1;
                }
            });
        });
    });
</script>
<script>
  window.addEventListener('scroll', () => {
    const header = document.querySelector('header');
    if (window.scrollY > 50) {
      header.classList.add('scrolled');
    } else {
      header.classList.remove('scrolled');
    }
  });
</script>
{% endblock %}
